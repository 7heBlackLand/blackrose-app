name: Create and Commit File

on:
  push:
    branches:
      - main
  workflow_dispatch: # ম্যানুয়ালি ট্রিগার করার জন্য

jobs:
  create-and-commit:
    runs-on: ubuntu-latest

    steps:
      # Step 1: Repository চেকআউট করা
      - name: Checkout repository
        uses: actions/checkout@v3
        with:
          persist-credentials: true # push করার জন্য প্রয়োজন

      # Step 2: একটি sample ফাইল তৈরি করা
      - name: Create a sample file
        run: |
          mkdir -p output
          echo "Hello World" > output/hello.txt

      # Step 3: ফাইলটি commit ও push করা
      - name: Commit and push file
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"
          git add output/hello.txt
          git commit -m "Add hello.txt from workflow" || echo "No changes to commit"
          git push
